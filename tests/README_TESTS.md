# í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

ì´ ë””ë ‰í† ë¦¬ì—ëŠ” ê°œë³„ ë…¸ë“œì™€ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

## fetch_market_data_node í…ŒìŠ¤íŠ¸

### ê¸°ë³¸ ì‚¬ìš©ë²•

```bash
# ëª¨ì˜íˆ¬ì ëª¨ë“œë¡œ KODEX 200 í…ŒìŠ¤íŠ¸ (ê¸°ë³¸ê°’)
python tests/test_fetch_market_data.py

# ë˜ëŠ” ì§ì ‘ ì‹¤í–‰
./tests/test_fetch_market_data.py
```

### ë‹¤ì–‘í•œ ì˜µì…˜

```bash
# ì‚¼ì„±ì „ì í…ŒìŠ¤íŠ¸
python tests/test_fetch_market_data.py --symbol 005930

# ì‹¤ì „íˆ¬ì ëª¨ë“œë¡œ í…ŒìŠ¤íŠ¸
python tests/test_fetch_market_data.py --mode real

# ë””ë²„ê·¸ ëª¨ë“œ í™œì„±í™”
python tests/test_fetch_market_data.py --debug

# ì—¬ëŸ¬ ì˜µì…˜ ì¡°í•©
python tests/test_fetch_market_data.py --symbol 005930 --mode demo --debug
```

### ì£¼ìš” ì¢…ëª© ì½”ë“œ

| ì¢…ëª©ëª… | ì½”ë“œ |
|--------|------|
| KODEX 200 | 069500 |
| ì‚¼ì„±ì „ì | 005930 |
| SKí•˜ì´ë‹‰ìŠ¤ | 000660 |
| NAVER | 035420 |
| ì¹´ì¹´ì˜¤ | 035720 |
| ì‚¼ì„±ë°”ì´ì˜¤ë¡œì§ìŠ¤ | 207940 |
| LGì—ë„ˆì§€ì†”ë£¨ì…˜ | 373220 |

### ì¶œë ¥ ì˜ˆì‹œ

```
================================================================================
fetch_market_data_node í…ŒìŠ¤íŠ¸ ê²°ê³¼
================================================================================

ğŸ“Š ê¸°ë³¸ ì •ë³´:
  - Timestamp: 2026-01-04T15:30:00.123456
  - Iteration: 1

ğŸ’° ë‹¹ì¼ ì‹œì„¸:
  - í˜„ì¬ê°€: 30,250ì›
  - ì‹œê°€: 30,000ì›
  - ê³ ê°€: 30,500ì›
  - ì €ê°€: 29,800ì›
  - ê±°ë˜ëŸ‰: 1,234,567ì£¼

ğŸ“ˆ ì „ì¼ ì‹œì„¸:
  - ì‹œê°€: 29,800ì›
  - ê³ ê°€: 30,500ì›
  - ì €ê°€: 29,000ì›
  - ì¢…ê°€: 29,900ì›
  - ê±°ë˜ëŸ‰: 1,100,000ì£¼

ğŸ“Š ì „ì¼ ëŒ€ë¹„:
  - ë³€í™”: +350ì› (+1.17%)

ğŸ“‰ ë³€ë™ì„± ì •ë³´:
  - ì „ì¼ ë³€ë™í­: 1,500ì›
  - ì˜ˆìƒ ëª©í‘œê°€ (k=0.5): 30,750ì›

================================================================================
```

### ë¬¸ì œ í•´ê²°

#### 1. ëª¨ì˜ ë°ì´í„°ë§Œ ì¶œë ¥ë˜ëŠ” ê²½ìš°

```
âš ï¸  ì£¼ì˜: ëª¨ì˜ ë°ì´í„°ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
```

**ì›ì¸**: KIS API ì„¤ì •ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŒ

**í•´ê²° ë°©ë²•**:
1. `config/kis_devlp.yaml` íŒŒì¼ í™•ì¸
2. API í‚¤ì™€ ì‹œí¬ë¦¿ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
3. ê³„ì¢Œ ë²ˆí˜¸ê°€ ì •í™•í•œì§€ í™•ì¸

#### 2. ImportError ë°œìƒ

```
ImportError: No module named 'lib.kis.kis_auth'
```

**í•´ê²° ë°©ë²•**:
```bash
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ ì‹¤í–‰
cd ~/trading_bot
python tests/test_fetch_market_data.py
```

#### 3. API ì¸ì¦ ì‹¤íŒ¨

```
ERROR - KIS ì¸ì¦ ì‹¤íŒ¨
```

**í•´ê²° ë°©ë²•**:
1. í™˜ê²½ ë³€ìˆ˜ í™•ì¸
2. API í‚¤ ìœ íš¨ì„± í™•ì¸
3. ë„¤íŠ¸ì›Œí¬ ì—°ê²° í™•ì¸

### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

#### ì‹œë‚˜ë¦¬ì˜¤ 1: ê¸°ë³¸ ê¸°ëŠ¥ í™•ì¸

```bash
# 1. ëª¨ì˜íˆ¬ìë¡œ ê¸°ë³¸ í…ŒìŠ¤íŠ¸
python tests/test_fetch_market_data.py

# 2. ê²°ê³¼ í™•ì¸
# - í˜„ì¬ê°€, ì‹œê°€ ë“±ì´ 0ì´ ì•„ë‹Œì§€ í™•ì¸
# - ì „ì¼ ë°ì´í„°ê°€ ì¡°íšŒë˜ëŠ”ì§€ í™•ì¸
```

#### ì‹œë‚˜ë¦¬ì˜¤ 2: ë‹¤ì–‘í•œ ì¢…ëª© í…ŒìŠ¤íŠ¸

```bash
# ETF
python tests/test_fetch_market_data.py --symbol 069500

# ëŒ€í˜•ì£¼
python tests/test_fetch_market_data.py --symbol 005930

# ì¤‘ì†Œí˜•ì£¼
python tests/test_fetch_market_data.py --symbol 035420
```

#### ì‹œë‚˜ë¦¬ì˜¤ 3: ì‹¤ì „íˆ¬ì ëª¨ë“œ í…ŒìŠ¤íŠ¸

```bash
# âš ï¸ ì£¼ì˜: ì‹¤ì „íˆ¬ì API ì‚¬ìš© (ì¿¼í„° ì†Œëª¨)
python tests/test_fetch_market_data.py --mode real --symbol 069500
```

### ì„±ëŠ¥ ì¸¡ì •

ë””ë²„ê·¸ ëª¨ë“œë¡œ ì‹¤í–‰í•˜ë©´ ê° ë‹¨ê³„ì˜ ì‹¤í–‰ ì‹œê°„ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```bash
python tests/test_fetch_market_data.py --debug
```

### ë‹¤ìŒ ë‹¨ê³„

fetch_market_data_nodeê°€ ì •ìƒ ì‘ë™í•˜ë©´ ë‹¤ìŒ ë…¸ë“œë“¤ë„ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”:

1. `calculate_target_node` - ëª©í‘œê°€ ê³„ì‚°
2. `generate_signal_node` - ë§¤ë§¤ ì‹ í˜¸ ìƒì„±
3. `execute_order_node` - ì£¼ë¬¸ ì‹¤í–‰
4. `update_account_node` - ê³„ì¢Œ ì •ë³´ ì—…ë°ì´íŠ¸

ì „ì²´ ê·¸ë˜í”„ í…ŒìŠ¤íŠ¸:
```bash
python apps/daily_breakout_app.py --mode demo --symbol 069500
```
